<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Document</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M"
        crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1"
        crossorigin="anonymous"></script>


    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>

<body>


    <div class="container-fluid" id="app">

        {{ deleteLatter }}

        <div class="row">

            <div class="col-4">
                <div class="card border-light text-white bg-primary " style="max-width: 20rem;">
                    <div class="card-header">
                        <i class="material-icons md-36">face</i> Users <span class="badge badge-secondary">
                            {{ connectedUsers.length }}</span>
                    </div>
                    <div class="card-body">
                        <h4 class="card-title">Primary card title</h4>
                        <p class="card-text">
                            Some quick example text to build on the card title and make up the bulk of the card's content.
                        </p>

                        <ul class="list-group">
                            <li class="list-group-item list-group-item-info" v-for="user in connectedUsers">
                                {{ user }}
                            </li>
                        </ul>

                    </div>
                </div>

            </div>

            <div class="col-8">
                <div class="card text-white bg-secondary " style="">
                    <div class="card-header">
                        <i class="material-icons">chat </i> Let's chat
                    </div>
                    <div class="card-body">
                        <h4 class="card-title">Secondary card title</h4>
                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>

                        <ul class="list-unstyled">
                            <li class="media">
                                <img class="d-flex mr-3" src="..." alt="Generic placeholder image">
                                <div class="media-body">
                                    <h5 class="mt-0 mb-1">List-based media object</h5>
                                    Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in
                                    vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla.
                                    Donec lacinia congue felis in faucibus.
                                </div>
                            </li>
                            <li class="media my-4">
                                <img class="d-flex mr-3" src="..." alt="Generic placeholder image">
                                <div class="media-body">
                                    <h5 class="mt-0 mb-1">List-based media object</h5>
                                    Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in
                                    vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla.
                                    Donec lacinia congue felis in faucibus.
                                </div>
                            </li>
                            <li class="media">
                                <img class="d-flex mr-3" src="..." alt="Generic placeholder image">
                                <div class="media-body">
                                    <h5 class="mt-0 mb-1">List-based media object</h5>
                                    Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in
                                    vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla.
                                    Donec lacinia congue felis in faucibus.
                                </div>
                            </li>
                        </ul>

                        <hr style="color:blueviolet">
                        <form class="form-inline">
                            <div class="form-group mx-sm-3">
                                <label for="message" class="sr-only">输入</label>
                                <input type="text" class="form-control" id="message" placeholder="you message here!">
                            </div>
                            <button type="submit" class="btn btn-primary">send</button>
                        </form>

                    </div>
                </div>
            </div>

        </div>
    </div>
    <script src="https://cdn.bootcss.com/socket.io/2.0.3/socket.io.js"></script>

    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script>
        // TODO 移到单独的一个js文件中去


        var socket = io() ; // io.connect();

        new Vue({
            el: '#app',
            data: {
                deleteLatter: "hello world",
                connectedUsers: ['user A', 'user B'],
                messages: [],
                message: {
                    "type": "",
                    "action": "",
                    "user": "",
                    "text": "",
                    "timestamp": ""
                },
                areTyping: []
            },
            created: function () {
                // if server emit 'user joined', update connectedUsers array
                socket.on('user joined',function(data){
                    // data is socket-id
                    var socketId = data ;

                    this.connectedUsers.push(socketId);
                }.bind(this));
            },
            methods: {
                send: function () {

                },
                userIsTyping: function (username) {

                },
                usersAreTyping: function () {

                },
                stoppedTyping: function () {

                }
            }
        });
    </script>
</body>

</html>